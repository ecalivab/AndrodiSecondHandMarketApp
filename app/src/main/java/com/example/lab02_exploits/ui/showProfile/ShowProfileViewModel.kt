package com.example.lab02_exploits.ui.showProfile

import android.util.Log
import androidx.lifecycle.LiveData
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import com.example.lab02_exploits.UserRepository
import com.example.lab02_exploits.Users
import com.example.lab02_exploits.ItemRepository

class ShowProfileViewModel : ViewModel() {

    private val userRepo = UserRepository()
    private val itemRepository = ItemRepository()


    fun fetchUserData() : LiveData<MutableList<Users>> {
        val mutableData = MutableLiveData<MutableList<Users>>()
        userRepo.getUsersData().observeForever{ userList ->
            mutableData.value = userList
        }
        return mutableData
    }

    fun fetchUser(Uid: String) : MutableLiveData<Users> {
        val currentUser = MutableLiveData<Users>()
        userRepo.getUser(Uid).observeForever{ user ->
            currentUser.value = user
            Log.d("showProfileVM","currentUser: $currentUser")
        }
        return  currentUser
    }

    fun fetchUserRating(sellerId : String) :  MutableLiveData<Double> {
        val currentRating = MutableLiveData<Double>()
        itemRepository.getSellerMediumReview(sellerId).observeForever {
            currentRating.value = it
        }
        return currentRating
    }

}
